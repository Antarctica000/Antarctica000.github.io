<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/black/pace-theme-big-counter.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"antarctica.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="坦克大战1.0前言：重温童年经典的坦克大战！1.0版本是基础版本，是我方一辆坦克与敌方三辆坦克的简单射击对战游戏。后续会自己开发出新版本，加入新的功能，例如游戏的主界面与各类弹窗，不同玩家身份信息与成绩的记录，不同关卡墙壁与障碍物的设置，背景音乐与不同场景的切换等等，不久后会有坦克大战2.0版。">
<meta property="og:type" content="article">
<meta property="og:title" content="坦克大战1.0">
<meta property="og:url" content="https://antarctica.github.io/2024/04/30/%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%981.0/index.html">
<meta property="og:site_name" content="Antarctica">
<meta property="og:description" content="坦克大战1.0前言：重温童年经典的坦克大战！1.0版本是基础版本，是我方一辆坦克与敌方三辆坦克的简单射击对战游戏。后续会自己开发出新版本，加入新的功能，例如游戏的主界面与各类弹窗，不同玩家身份信息与成绩的记录，不同关卡墙壁与障碍物的设置，背景音乐与不同场景的切换等等，不久后会有坦克大战2.0版。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="c:/Users/%E5%90%B4%E4%BA%A6%E6%B6%B5/AppData/Roaming/Typora/typora-user-images/image-20240525091437505.png">
<meta property="og:image" content="c:/Users/%E5%90%B4%E4%BA%A6%E6%B6%B5/AppData/Roaming/Typora/typora-user-images/image-20240525161710788.png">
<meta property="og:image" content="c:/Users/%E5%90%B4%E4%BA%A6%E6%B6%B5/AppData/Roaming/Typora/typora-user-images/image-20240528072506595.png">
<meta property="article:published_time" content="2024-04-30T02:25:23.000Z">
<meta property="article:modified_time" content="2024-05-30T02:17:02.356Z">
<meta property="article:author" content="Antarctica">
<meta property="article:tag" content="技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/%E5%90%B4%E4%BA%A6%E6%B6%B5/AppData/Roaming/Typora/typora-user-images/image-20240525091437505.png">


<link rel="canonical" href="https://antarctica.github.io/2024/04/30/%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%981.0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://antarctica.github.io/2024/04/30/%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%981.0/","path":"2024/04/30/坦克大战1.0/","title":"坦克大战1.0"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>坦克大战1.0 | Antarctica</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Antarctica</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Antarctica Blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%981-0"><span class="nav-number">1.</span> <span class="nav-text">坦克大战1.0</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E7%BB%98%E5%9B%BE%E6%8A%80%E6%9C%AF%EF%BC%88%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86%EF%BC%89"><span class="nav-number">1.1.</span> <span class="nav-text">一、绘图技术（前置知识）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E7%BB%98%E5%88%B6%E5%9D%A6%E5%85%8B"><span class="nav-number">1.2.</span> <span class="nav-text">二、绘制坦克</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E8%AE%BE%E8%AE%A1%E7%B1%BB%E7%BB%93%E6%9E%84"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 设计类结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E7%BB%98%E5%88%B6%E5%9D%A6%E5%85%8B%E5%9B%BE%E5%83%8F"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 绘制坦克图像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E5%9D%A6%E5%85%8B%E7%A7%BB%E5%8A%A8-%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3 坦克移动(事件监听)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9%E4%B8%8E%E7%A7%BB%E5%8A%A8-%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="nav-number">1.3.</span> <span class="nav-text">三、发射子弹与移动(多线程)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E6%88%91%E6%96%B9%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 我方发射子弹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">遇到问题：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">执行代码：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E6%95%8C%E6%96%B9%E5%8F%91%E5%B0%84%E5%AD%90%E5%BC%B9%E4%B8%8E%E7%A7%BB%E5%8A%A8"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.2 敌方发射子弹与移动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%EF%BC%9A-1"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">遇到问题：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%9A-1"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">执行代码：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E7%88%86%E7%82%B8%E7%89%B9%E6%95%88"><span class="nav-number">1.3.3.</span> <span class="nav-text">3.3 爆炸特效</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A2%9E%E5%8A%A0%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">增加代码：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E9%98%B2%E6%AD%A2%E5%9D%A6%E5%85%8B%E9%87%8D%E5%8F%A0"><span class="nav-number">1.4.</span> <span class="nav-text">四、防止坦克重叠</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%87%E5%88%B0%E9%97%AE%E9%A2%98%EF%BC%9A-2"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">遇到问题：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="nav-number">1.5.</span> <span class="nav-text">五、源代码</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Antarctica"
      src="/images/people.jpg">
  <p class="site-author-name" itemprop="name">Antarctica</p>
  <div class="site-description" itemprop="description">Antarctica Blog</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Antarctica000" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Antarctica000" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://antarctica.github.io/2024/04/30/%E5%9D%A6%E5%85%8B%E5%A4%A7%E6%88%981.0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/people.jpg">
      <meta itemprop="name" content="Antarctica">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Antarctica">
      <meta itemprop="description" content="Antarctica Blog">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="坦克大战1.0 | Antarctica">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          坦克大战1.0
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-04-30 10:25:23" itemprop="dateCreated datePublished" datetime="2024-04-30T10:25:23+08:00">2024-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-05-30 10:17:02" itemprop="dateModified" datetime="2024-05-30T10:17:02+08:00">2024-05-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="坦克大战1-0"><a href="#坦克大战1-0" class="headerlink" title="坦克大战1.0"></a>坦克大战1.0</h1><p><strong>前言：</strong>重温童年经典的坦克大战！1.0版本是基础版本，是我方一辆坦克与敌方三辆坦克的简单射击对战游戏。后续会自己开发出新版本，加入新的功能，例如游戏的主界面与各类弹窗，不同玩家身份信息与成绩的记录，不同关卡墙壁与障碍物的设置，背景音乐与不同场景的切换等等，不久后会有坦克大战2.0版。<span id="more"></span></p>
<h2 id="一、绘图技术（前置知识）"><a href="#一、绘图技术（前置知识）" class="headerlink" title="一、绘图技术（前置知识）"></a>一、绘图技术（前置知识）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">DrawCircle</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DrawCircle</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span>&#123;<span class="comment">//窗口(画框)</span></span><br><span class="line">    <span class="keyword">private</span> MyPanel mp;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DrawCircle</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.mp = <span class="keyword">new</span> <span class="title class_">MyPanel</span>();<span class="comment">//初始化面板</span></span><br><span class="line">        <span class="built_in">this</span>.add(mp);<span class="comment">//把面板放入窗口</span></span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">400</span>,<span class="number">400</span>);<span class="comment">//设置窗口大小</span></span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);<span class="comment">//退出程序</span></span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);<span class="comment">//设置可显示</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span>&#123;<span class="comment">//面板</span></span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//g可以看作画笔</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span>&#123;<span class="comment">//绘图方法</span></span><br><span class="line">        <span class="built_in">super</span>.paint(g);<span class="comment">//调用父类的方法完成初始化</span></span><br><span class="line">        g.drawOval(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意1：</strong>当组件第一次在屏幕上显示时，程序会<strong>自动</strong>调用<code>paint()</code>方法来绘制组件。<br><strong>注意2：</strong>在以下情况<code>paint()</code>方法将被自动调用：<br>              1.窗口先最小化，再最大化<br>              2.窗口的大小发生变化<br>              3.<code>repaint()</code>函数被调用（刷新组件的外观）</p>
<p><img src="C:/Users/吴亦涵/AppData/Roaming/Typora/typora-user-images/image-20240525091437505.png" alt="image-20240525091437505"></p>
<h2 id="二、绘制坦克"><a href="#二、绘制坦克" class="headerlink" title="二、绘制坦克"></a>二、绘制坦克</h2><h3 id="2-1-设计类结构"><a href="#2-1-设计类结构" class="headerlink" title="2.1 设计类结构"></a>2.1 设计类结构</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tank父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0上1下2左3右</span></span><br><span class="line">    <span class="comment">//...(省略构造与getter和setter)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Hero玩家类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hero</span> <span class="keyword">extends</span> <span class="title class_">Tank</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Hero</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Enemy敌人类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enemy</span> <span class="keyword">extends</span> <span class="title class_">Tank</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Enemy</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//APP启动类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">APP</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">GameJFrame</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//GameJFrame框架类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GameJFrame</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">MyPanel</span> <span class="variable">myPanel</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GameJFrame</span><span class="params">()</span>&#123;</span><br><span class="line">        myPanel = <span class="keyword">new</span> <span class="title class_">MyPanel</span>();</span><br><span class="line">        <span class="built_in">this</span>.add(myPanel);</span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">1000</span>,<span class="number">750</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//MyPanel绘图类(主要代码)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Hero</span> <span class="variable">hero</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Enemy&gt; enemies = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();<span class="comment">//多线程安全</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">enemyAmount</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPanel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//初始化我方坦克</span></span><br><span class="line">        hero = <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="number">200</span>, <span class="number">200</span>);</span><br><span class="line">        hero.setSpeed(<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//初始化敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; enemyAmount; i++) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enemy</span>(<span class="number">100</span> * (i + <span class="number">1</span>), <span class="number">100</span>);</span><br><span class="line">            enemy.setDirect(<span class="number">1</span>);</span><br><span class="line">            enemy.setSpeed(<span class="number">1</span>);</span><br><span class="line">            enemies.add(enemy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.paint(g);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>);<span class="comment">//填充背景</span></span><br><span class="line">        <span class="comment">//画出我方坦克</span></span><br><span class="line">        drawTank(hero.getX(), hero.getY(), g, hero.getDirect(), <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawTank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, Graphics g, <span class="type">int</span> direct, <span class="type">int</span> type)</span> &#123;...&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-绘制坦克图像"><a href="#2-2-绘制坦克图像" class="headerlink" title="2.2 绘制坦克图像"></a>2.2 绘制坦克图像</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel类drawTank方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawTank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, Graphics g, <span class="type">int</span> direct, <span class="type">int</span> type)</span> &#123;</span><br><span class="line">        <span class="comment">//根据不同类型设置不同颜色</span></span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:<span class="comment">//Hero坦克</span></span><br><span class="line">                g.setColor(Color.yellow);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//Enemy坦克</span></span><br><span class="line">                g.setColor(Color.cyan);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//根据不同方向绘制坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:<span class="comment">//上</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y, x + <span class="number">20</span>, y + <span class="number">30</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//下</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y + <span class="number">30</span>, x + <span class="number">20</span>, y + <span class="number">60</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:<span class="comment">//左</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x, y + <span class="number">30</span>, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">20</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x, y + <span class="number">20</span>, x + <span class="number">30</span>, y + <span class="number">20</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">//右</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x, y + <span class="number">30</span>, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">20</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x + <span class="number">30</span>, y + <span class="number">20</span>, x + <span class="number">60</span>, y + <span class="number">20</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-坦克移动-事件监听"><a href="#2-3-坦克移动-事件监听" class="headerlink" title="2.3 坦克移动(事件监听)"></a>2.3 坦克移动(事件监听)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tank</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0上1下2左3右</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">speed</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">//上下左右移动</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveUp</span><span class="params">()</span> &#123;y -= speed;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveDown</span><span class="params">()</span> &#123;y += speed;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveLeft</span><span class="params">()</span> &#123;x -= speed;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveRight</span><span class="params">()</span> &#123;x += speed;&#125;</span><br><span class="line"><span class="comment">//构造方法与getter和setter不变...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GameJFrame</span></span><br><span class="line"><span class="built_in">this</span>.addKeyListener(myPanel);<span class="comment">//窗口监听面板发生的键盘事件</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel</span></span><br><span class="line"><span class="comment">//构造方法里设置坦克初始速度</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyPanel</span><span class="params">()</span> &#123;</span><br><span class="line">        hero = <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">        hero.setSpeed(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//重写接口函数(事件监听)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> e.getKeyCode();</span><br><span class="line">    <span class="keyword">switch</span> (d) &#123;</span><br><span class="line">        <span class="keyword">case</span> KeyEvent.VK_W:</span><br><span class="line">            hero.setDirect(<span class="number">0</span>);</span><br><span class="line">            hero.moveUp();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> KeyEvent.VK_S:</span><br><span class="line">            hero.setDirect(<span class="number">1</span>);</span><br><span class="line">            hero.moveDown();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> KeyEvent.VK_A:</span><br><span class="line">            hero.setDirect(<span class="number">2</span>);</span><br><span class="line">            hero.moveLeft();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> KeyEvent.VK_D:</span><br><span class="line">            hero.setDirect(<span class="number">3</span>);</span><br><span class="line">            hero.moveRight();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.repaint();<span class="comment">//别忘了要重绘</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、发射子弹与移动-多线程"><a href="#三、发射子弹与移动-多线程" class="headerlink" title="三、发射子弹与移动(多线程)"></a>三、发射子弹与移动(多线程)</h2><h3 id="3-1-我方发射子弹"><a href="#3-1-我方发射子弹" class="headerlink" title="3.1 我方发射子弹"></a>3.1 我方发射子弹</h3><p><img src="C:/Users/吴亦涵/AppData/Roaming/Typora/typora-user-images/image-20240525161710788.png" alt="image-20240525161710788"></p>
<h4 id="遇到问题："><a href="#遇到问题：" class="headerlink" title="遇到问题："></a><strong>遇到问题：</strong></h4><ol>
<li><p>射出子弹后，子弹出现位置不对，且不会自己动<br><strong>解决：</strong>debug发现子弹speed初始值为0，所以自然不会动</p>
</li>
<li><p>坦克方向为2、3时，子弹分别向左上与左下运动，坦克方向为0、1时，子弹仍不动。且输出的x与y坐标均正确，但绘出的子弹运动轨迹不符合<br><strong>解决：</strong>paint函数里绘制子弹的代码写错了！连写了两个x</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel里的paint函数里绘制子弹的部分</span></span><br><span class="line"><span class="keyword">if</span> (hero.getShot() != <span class="literal">null</span> &amp;&amp; hero.getShot().isLive()) &#123;</span><br><span class="line">    g.fill3DRect(hero.getShot().getX(), hero.getShot().getX(), <span class="number">3</span>, <span class="number">3</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>为什么相比于一直按键而快速移动的坦克，子弹速度那么慢呢<br><strong>解决：</strong>run方法里休眠的时间太长了 缩短至50ms就会很快</p>
</li>
<li><p>为什么坦克多按几次<code>J</code>键，每次按下之后，已射出的子弹就会消失，都会重新从炮筒处开始？<br><strong>解决：</strong>因为每次按下<code>J</code>键都是启动<code>shoot</code>方法，<code>hero</code>里的子弹属性就是新创建的一个子弹，并开启一个新的线程，原来的子弹就被直接替代。所以应该考虑使用集合存储创建过的子弹，且规定集合存储的上限来限制坦克短时间连续发射子弹的数量。</p>
</li>
<li><p>如何实现有上限的子弹连发？<br><strong>解决：</strong>创建一个子弹容器Vector，容量为3，重绘时遍历集合，将1至3枚不断运动的子弹绘出。</p>
</li>
<li><p>子弹容器无法限制住连发很多子弹？<br><strong>解决：</strong>因为Vector会自动扩容！stupid！创建集合时是初始化容量，而非限制容量，应该手动写出容量限制逻辑的代码，例如只有集合中的子弹全部遇到边界销毁时才能发射新的子弹。</p>
</li>
<li><p>坦克发射子弹时便不能移动。如何做到坦克边走边射子弹？<br><strong>解决：</strong>（暂时搁置 大概是没学过的知识）</p>
</li>
</ol>
<h4 id="执行代码："><a href="#执行代码：" class="headerlink" title="执行代码："></a>执行代码：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Shot子弹类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Shot</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">speed</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isLive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (isLive) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    y -= speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    y += speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    x -= speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    x += speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;<span class="comment">//判断子弹是否存活</span></span><br><span class="line">            <span class="keyword">if</span> (!(x &gt;= <span class="number">0</span> &amp;&amp; x &lt;= <span class="number">1000</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt;= <span class="number">750</span>)) &#123;</span><br><span class="line">                isLive = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="comment">//省略构造器 getter和setter...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tank类新增代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0上1下2左3右</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">speed</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Shot&gt; shots = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//射击行为</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shoot</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否达到容量上限</span></span><br><span class="line">        <span class="keyword">if</span> (isFull())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">switch</span> (getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x + <span class="number">20</span>, y, <span class="number">0</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x + <span class="number">20</span>, y + <span class="number">60</span>, <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x, y + <span class="number">20</span>, <span class="number">2</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x + <span class="number">60</span>, y + <span class="number">20</span>, <span class="number">3</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//启动shot线程</span></span><br><span class="line">        <span class="keyword">for</span> (Shot shot : shots) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(shot).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//判断容量并且删除出边界子弹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Shot shot : shots) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!shot.isLive())</span><br><span class="line">                shots.remove(shot);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (shots.size() == <span class="number">5</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel新增代码</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    drawShots(hero, g);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//画出我方发射子弹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShots</span><span class="params">(Hero hero, Graphics g)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Shot shot : hero.getShots()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (shot != <span class="literal">null</span>) &#123;</span><br><span class="line">            g.fill3DRect(shot.getX(), shot.getY(), <span class="number">3</span>, <span class="number">3</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//按下J键即发射子弹</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> e.getKeyCode();</span><br><span class="line">    <span class="keyword">switch</span> (d) &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">case</span> KeyEvent.VK_J:</span><br><span class="line">            hero.shoot();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.repaint();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//MyPanel需不断重绘才能画出子弹运动轨迹</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.repaint();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3-2-敌方发射子弹与移动"><a href="#3-2-敌方发射子弹与移动" class="headerlink" title="3.2 敌方发射子弹与移动"></a>3.2 敌方发射子弹与移动</h3><p><img src="C:/Users/吴亦涵/AppData/Roaming/Typora/typora-user-images/image-20240528072506595.png" alt="image-20240528072506595"></p>
<h4 id="遇到问题：-1"><a href="#遇到问题：-1" class="headerlink" title="遇到问题："></a><strong>遇到问题：</strong></h4><ol>
<li><p>怎么实现敌方不定时随机发射子弹？代码逻辑写在Enemy类内？<br><strong>解答：</strong>每个敌方坦克都是一个新的子线程，run方法里执行shoot过后休眠随机时间即可。</p>
</li>
<li><p>为什么敌方射过一波子弹后就停止了？<br><strong>解答：</strong>这个debug了好久也没搞懂原因。为了排除是随即休眠时间的影响，先改为固定休眠一秒，模仿Hero固定频率发射子弹，但是没改变，还是不知道哪里出错了。<br>真的气笑了。找了那么久的代码逻辑bug硬是没找出来，最终把报错信息给GPT看，分分钟解决。原来是集合基础知识的缺漏。判断并删除无效子弹的<code>isFull</code>函数不能这样写。<br>根据报错信息，问题出现在 <code>Tank</code> 类的 <code>isFull()</code> 方法中，这个方法使用了一个增强型 for 循环来遍历 <code>shots</code> 集合，而在这个循环中，可能会导致 <code>ConcurrentModificationException</code> 异常。此异常表示在迭代过程中，如果使用集合的方法改变了集合的结构（比如添加或删除元素），则会抛出这个异常。在你的代码中，在 <code>isFull()</code> 方法中，如果子弹的 <code>isLive</code> 属性为 <code>false</code>，则会删除这个子弹，这就可能导致集合结构发生变化，而当前的增强型 for 循环无法正确地处理这种情况。<br>为了解决这个问题，可以考虑使用迭代器（Iterator）来遍历集合，因为迭代器是集合的一部分，它专门用于<mark>在迭代过程中对集合进行修改</mark>，避免了 <code>ConcurrentModificationException</code> 异常的发生。<br>加深了对于迭代器的理解。原来这些不同的遍历方式确实有独特的用武之地。还有以后着重问问报错信息，不要无头无脑去改代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原本错误代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Shot shot : shots) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!shot.isLive())</span><br><span class="line">            shots.remove(shot);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (shots.size() == <span class="number">5</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//修改后</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">    Iterator&lt;Shot&gt; iterator = shots.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        <span class="type">Shot</span> <span class="variable">shot</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">        <span class="keyword">if</span> (!shot.isLive()) &#123;</span><br><span class="line">            iterator.remove();<span class="comment">//使用迭代器的remove方法删除元素</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> shots.size() == <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>敌方坦克自由移动时卡顿瞬移？<br><strong>解答：</strong>参考我方坦克的移动，每走一步都会有一定时间间隔，因此敌方也需要每走一步都间隔一定时间，所以需要开启射击和移动两个子线程，再放入<code>run()</code>里启动。<br>还有，坦克移动范围限制时，不能简单的直接写上面板长宽，要结合坦克xy坐标与自身长度做出限制。很简单的，找个边界条件即可</p>
</li>
<li><p>敌方开启双线程自然实现移动发射，我方怎么做？是键盘监听只能一个的问题吗？<br><strong>解答：</strong>待定。。。</p>
</li>
</ol>
<h4 id="执行代码：-1"><a href="#执行代码：-1" class="headerlink" title="执行代码："></a><strong>执行代码：</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tank类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0上1下2左3右</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">speed</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isLive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Shot&gt; shots = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//射击</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shoot</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">    <span class="comment">//删除死亡子弹并判断容量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        Iterator&lt;Shot&gt; iterator = shots.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Shot</span> <span class="variable">shot</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (!shot.isLive()) &#123;</span><br><span class="line">                iterator.remove(); <span class="comment">//使用迭代器的remove方法删除元素</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> shots.size() == <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断子弹是否击中对方</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isHit</span><span class="params">(Tank tank)</span> &#123;<span class="comment">//多态</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> tank.getX();</span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> tank.getY();</span><br><span class="line">        Iterator&lt;Shot&gt; iterator = shots.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Shot</span> <span class="variable">shot</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">switch</span> (tank.getDirect()) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">if</span> (shot.getX() &gt;= x &amp;&amp; shot.getX() &lt;= x + <span class="number">40</span> &amp;&amp; shot.getY() &gt;= y &amp;&amp; shot.getY() &lt;= y + <span class="number">60</span>) &#123;</span><br><span class="line">                        shot.setLive(<span class="literal">false</span>);</span><br><span class="line">                        iterator.remove();</span><br><span class="line">                        tank.setLive(<span class="literal">false</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    <span class="keyword">if</span> (shot.getX() &gt;= x &amp;&amp; shot.getX() &lt;= x + <span class="number">60</span> &amp;&amp; shot.getY() &gt;= y &amp;&amp; shot.getY() &lt;= y + <span class="number">40</span>) &#123;</span><br><span class="line">                        shot.setLive(<span class="literal">false</span>);</span><br><span class="line">                        iterator.remove();</span><br><span class="line">                        tank.setLive(<span class="literal">false</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//限制坦克移动范围</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveUp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        y -= speed;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &gt;= <span class="number">690</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        y += speed;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveLeft</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        x -= speed;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveRight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &gt;= <span class="number">940</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        x += speed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Enemy类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enemy</span> <span class="keyword">extends</span> <span class="title class_">Tank</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Enemy</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//随机移动</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//随机改变坦克方向</span></span><br><span class="line">        setDirect((<span class="type">int</span>) (Math.random() * <span class="number">4</span>));</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * <span class="number">100</span> + <span class="number">50</span>);<span class="comment">//最小值时的最低步数</span></span><br><span class="line">        <span class="keyword">switch</span> (getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveUp();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveDown();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveLeft();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveRight();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//控制时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">extracted</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">20</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//自由随机移动线程</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">moving</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">moveThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">                move();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        moveThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//射击线程</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">shooting</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">shootThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">                shoot();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep((<span class="type">int</span>) (Math.random() * <span class="number">5000</span>));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        shootThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        shooting();</span><br><span class="line">        moving();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> <span class="keyword">implements</span> <span class="title class_">KeyListener</span>, Runnable &#123;</span><br><span class="line">    <span class="keyword">private</span> Hero hero;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Enemy&gt; enemies = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">enemyAmount</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPanel</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//初始化我方坦克</span></span><br><span class="line">        hero = <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="number">500</span>, <span class="number">200</span>);</span><br><span class="line">        hero.setSpeed(<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//初始化敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; enemyAmount; i++) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enemy</span>(<span class="number">100</span> * (i + <span class="number">1</span>), <span class="number">100</span>);</span><br><span class="line">            enemy.setDirect(<span class="number">1</span>);</span><br><span class="line">            enemy.setSpeed(<span class="number">1</span>);</span><br><span class="line">            enemies.add(enemy);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//敌方开启自由射击</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(enemy).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.paint(g);</span><br><span class="line">        <span class="comment">//填充背景</span></span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>);</span><br><span class="line">        <span class="comment">//画出我方坦克</span></span><br><span class="line">        <span class="keyword">if</span> (hero.isLive())</span><br><span class="line">            drawTank(hero.getX(), hero.getY(), g, hero.getDirect(), <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (enemy != <span class="literal">null</span> &amp;&amp; enemy.isLive())</span><br><span class="line">                drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//画出我方发射子弹</span></span><br><span class="line">        drawShots(hero, g, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方发射子弹</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            drawShots(enemy, g, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断子弹是否击中坦克</span></span><br><span class="line">        Iterator&lt;Enemy&gt; iterator = enemies.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (enemy.isHit(hero))</span><br><span class="line">                hero.setLive(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">if</span> (hero.isHit(enemy)) &#123;</span><br><span class="line">                enemy.setLive(<span class="literal">false</span>);</span><br><span class="line">                iterator.remove();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//绘出子弹(注意颜色)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShots</span><span class="params">(Tank tank, Graphics g, <span class="type">int</span> type)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Shot shot : tank.getShots()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (type == <span class="number">0</span>)</span><br><span class="line">                g.setColor(Color.yellow);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                g.setColor(Color.cyan);</span><br><span class="line">            g.fill3DRect(shot.getX(), shot.getY(), <span class="number">3</span>, <span class="number">3</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//画出坦克</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawTank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, Graphics g, <span class="type">int</span> direct, <span class="type">int</span> type)</span> &#123;...&#125;</span><br><span class="line">    <span class="comment">//键盘监听</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;...&#125;</span><br><span class="line">    <span class="comment">//开启重绘线程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-爆炸特效"><a href="#3-3-爆炸特效" class="headerlink" title="3.3 爆炸特效"></a>3.3 爆炸特效</h3><h4 id="增加代码："><a href="#增加代码：" class="headerlink" title="增加代码："></a><strong>增加代码：</strong></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Bomb类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bomb</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">life</span> <span class="operator">=</span> <span class="number">9</span>;<span class="comment">//生命值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isLive;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//减少生命值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">LifeDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (life &gt; <span class="number">0</span>)</span><br><span class="line">            life--;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            isLive = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            LifeDown();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!isLive)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getter setter 构造器...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> <span class="keyword">implements</span> <span class="title class_">KeyListener</span>, Runnable &#123;</span><br><span class="line">    <span class="keyword">private</span> Hero hero;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Enemy&gt; enemies = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">enemyAmount</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Bomb&gt; bombs = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Image</span> <span class="variable">image1</span> <span class="operator">=</span> ImageIO.read(getClass().getResourceAsStream(<span class="string">&quot;image/爆炸一.png&quot;</span>));</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Image</span> <span class="variable">image2</span> <span class="operator">=</span> ImageIO.read(getClass().getResourceAsStream(<span class="string">&quot;image/爆炸二.png&quot;</span>));</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Image</span> <span class="variable">image3</span> <span class="operator">=</span> ImageIO.read(getClass().getResourceAsStream(<span class="string">&quot;image/爆炸三.png&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> MyPanel <span class="keyword">throws</span> <span class="title function_">IOException</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.paint(g);</span><br><span class="line">        <span class="comment">//填充背景</span></span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>);</span><br><span class="line">        <span class="comment">//画出我方坦克</span></span><br><span class="line">        <span class="keyword">if</span> (hero.isLive())</span><br><span class="line">            drawTank(hero.getX(), hero.getY(), g, hero.getDirect(), <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (enemy != <span class="literal">null</span> &amp;&amp; enemy.isLive())</span><br><span class="line">                drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//画出我方发射子弹</span></span><br><span class="line">        drawShots(hero, g, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方发射子弹</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            drawShots(enemy, g, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断子弹是否击中坦克</span></span><br><span class="line">        Iterator&lt;Enemy&gt; iterator = enemies.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (enemy.isHit(hero)) &#123;</span><br><span class="line">                hero.setLive(<span class="literal">false</span>);</span><br><span class="line">                createBombs(hero.getX(), hero.getY());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (hero.isHit(enemy)) &#123;</span><br><span class="line">                enemy.setLive(<span class="literal">false</span>);</span><br><span class="line">                createBombs(enemy.getX(), enemy.getY());</span><br><span class="line">                iterator.remove();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//画出爆炸效果</span></span><br><span class="line">        Iterator&lt;Bomb&gt; iterator2 = bombs.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator2.hasNext()) &#123;</span><br><span class="line">            <span class="type">Bomb</span> <span class="variable">bomb</span> <span class="operator">=</span> iterator2.next();</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(bomb);</span><br><span class="line">            <span class="keyword">if</span> (bomb.getLife() &gt; <span class="number">6</span>)</span><br><span class="line">                g.drawImage(image1, bomb.getX(), bomb.getY(), <span class="number">60</span>, <span class="number">60</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (bomb.getLife() &gt; <span class="number">3</span>)</span><br><span class="line">                g.drawImage(image2, bomb.getX(), bomb.getY(), <span class="number">60</span>, <span class="number">60</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                g.drawImage(image3, bomb.getX(), bomb.getY(), <span class="number">60</span>, <span class="number">60</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (!bomb.isLive())</span><br><span class="line">                iterator2.remove();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//绘出子弹(注意颜色)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShots</span><span class="params">(Tank tank, Graphics g, <span class="type">int</span> type)</span> &#123;...&#125;</span><br><span class="line">    <span class="comment">//画出坦克</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawTank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, Graphics g, <span class="type">int</span> direct, <span class="type">int</span> type)</span> &#123;...&#125;</span><br><span class="line">    <span class="comment">//键盘监听</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;...&#125;</span><br><span class="line">    <span class="comment">//开启重绘线程</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//初始化炸弹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createBombs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            bombs.add(<span class="keyword">new</span> <span class="title class_">Bomb</span>(x, y));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="四、防止坦克重叠"><a href="#四、防止坦克重叠" class="headerlink" title="四、防止坦克重叠"></a>四、防止坦克重叠</h2><h4 id="遇到问题：-2"><a href="#遇到问题：-2" class="headerlink" title="遇到问题："></a><strong>遇到问题：</strong></h4><ol>
<li><p>看起来简单 实现太难了！粗略将坦克看作两个大正方形，怎么在判断重叠时停止move线程？直到对方移开再继续move？<br><strong>解答：</strong>要暂停 <code>Enemy</code> 类中的 <code>move</code> 子线程，可以通过设置一个标志来控制子线程的运行状态。你可以在 <code>Enemy</code> 类中添加一个标志，例如 <code>isMoving</code>，然后在 <code>move</code> 方法中根据这个标志来控制子线程的执行。当需要暂停子线程时，将 <code>isMoving</code> 设置为 <code>false</code>，子线程会在下一次迭代时检查到这个状态，并停止运行。<br>因此逻辑就是：遍历集合中的敌方坦克，当两个坦克相遇时，其中一个坦克需要停止移动，静待另一个坦克的随即移动直到不再相遇，再继续move子线程。</p>
</li>
<li><p>勉强实现此功能，但是当两个坦克相遇时界面会卡住，子弹不再运动，所有坦克都无法移动包括玩家，且当玩家射击敌方坦克时也会卡住且直接报错。但是玩家被射中时正常爆炸。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//暂停重叠敌方坦克</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; enemyAmount; i++) &#123;</span><br><span class="line">        <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> enemies.get(i);</span><br><span class="line">        <span class="comment">//此处是否还要判断存活或空?</span></span><br><span class="line">        <span class="keyword">while</span> (isMiss(enemy, i)) &#123;</span><br><span class="line">            enemy.setMissing(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        enemy.setMissing(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断敌方坦克是否重叠</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isMiss</span><span class="params">(Enemy enemy, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> enemy.getX() + <span class="number">30</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> enemy.getY() + <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; enemyAmount; j++) &#123;</span><br><span class="line">        <span class="type">Enemy</span> <span class="variable">enemy1</span> <span class="operator">=</span> enemies.get(j);</span><br><span class="line">        <span class="keyword">if</span> (enemy1 != <span class="literal">null</span> &amp;&amp; enemy1.isLive()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> enemy1.getX() + <span class="number">30</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> enemy1.getY() + <span class="number">30</span>;</span><br><span class="line">            <span class="keyword">if</span> (Math.abs(a - x) &lt;= <span class="number">60</span> &amp;&amp; Math.abs(b - y) &lt;= <span class="number">60</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不对，根本就不能这样写。虽然还是不知道上述代码哪里出错了，但是一开始我的思路就错了。如果其中一个坦克需要停止移动，静待另一个坦克的随即移动直到不再相遇，再继续move子线程的话，那么可以自由移动的坦克仍然可以移动至与静止坦克重叠。所以应该是两个坦克相撞则立即朝相反方向“弹开”才对。</p>
</li>
<li><p>逻辑差不多正确写好了，但是Enemy里还有一个子线程move，导致坦克有一定几率在重叠时仍然移动，如何解决？<br><strong>解答：</strong>加一个属性isMiss，在判断重叠时改为true，然后在moving子线程里加相应的逻辑，未重叠才能自由移动。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">moving</span><span class="params">()</span> &#123;</span><br><span class="line">    moveThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">        <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!isMiss) <span class="comment">//未重叠才能自由移动</span></span><br><span class="line">                move();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    moveThread.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>大体功能实现了，但是代码逻辑还是有问题。坦克移动轨迹会很奇怪，而且即使没有重叠，轨迹也并不随机，且因为missTank时的moveUp与随机moving的速度不一。而且坦克会突然卡住不动。<br>总之还是先放在后面再解决吧，总是出各种千奇百怪的bug，看来还是线程搞太多了。这个重叠问题搞不动了。之后在解决吧。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重叠处理的Enemy代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enemy</span> <span class="keyword">extends</span> <span class="title class_">Tank</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isMiss</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> Thread moveThread;</span><br><span class="line">    <span class="keyword">private</span> Thread shootThread;</span><br><span class="line">    <span class="comment">//判断是否重叠</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">isMissing</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否重叠</span></span><br><span class="line">        isMiss = !(Math.abs(a - x) &lt;= <span class="number">60</span> &amp;&amp; Math.abs(b - y) &lt;= <span class="number">60</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//与对方重叠时反方向移动</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">missMove</span><span class="params">(Enemy enemy)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> enemy.getX() + <span class="number">30</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> enemy.getY() + <span class="number">30</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> getX() + <span class="number">30</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> getY() + <span class="number">30</span>;</span><br><span class="line">        <span class="comment">//判断是否重叠</span></span><br><span class="line">        isMissing(a, b, x, y);</span><br><span class="line">        <span class="comment">//注意此处若不重叠则无需进行方法</span></span><br><span class="line">        <span class="keyword">if</span> (isMiss)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//己方坦克与对方坦克垂直与水平的相对位置</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">deltaX</span> <span class="operator">=</span> x - a;</span><br><span class="line">        <span class="type">int</span> <span class="variable">deltaY</span> <span class="operator">=</span> y - b;</span><br><span class="line">        <span class="comment">//根据相对位置调整移动方向</span></span><br><span class="line">        <span class="keyword">if</span> (Math.abs(deltaX) &gt; Math.abs(deltaY)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (deltaX &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                setDirect(<span class="number">3</span>);</span><br><span class="line">                moveRight();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                setDirect(<span class="number">2</span>);</span><br><span class="line">                moveLeft();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (deltaY &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 己方坦克在对方坦克上方，向下移动</span></span><br><span class="line">                setDirect(<span class="number">1</span>); <span class="comment">// 设置向下移动</span></span><br><span class="line">                moveDown(); <span class="comment">// 执行向下移动</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 己方坦克在对方坦克下方，向上移动</span></span><br><span class="line">                setDirect(<span class="number">0</span>); <span class="comment">// 设置向上移动</span></span><br><span class="line">                moveUp(); <span class="comment">// 执行向上移动</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        isMissing(a, b, x, y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//随机移动</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//随机改变坦克方向</span></span><br><span class="line">        setDirect((<span class="type">int</span>) (Math.random() * <span class="number">4</span>));</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * <span class="number">100</span> + <span class="number">50</span>);<span class="comment">//最小值时的最低步数</span></span><br><span class="line">        <span class="keyword">switch</span> (getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveUp();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveDown();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveLeft();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveRight();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//控制时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">extracted</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">20</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 自由随机移动线程</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">moving</span><span class="params">()</span> &#123;</span><br><span class="line">        moveThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!isMiss) <span class="comment">//未重叠才能自由移动</span></span><br><span class="line">                    move();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        moveThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//射击线程</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">shooting</span><span class="params">()</span> &#123;</span><br><span class="line">        shootThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">                shoot();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep((<span class="type">int</span>) (Math.random() * <span class="number">5000</span>));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        shootThread.start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        shooting();</span><br><span class="line">        moving();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重叠处理的部分MyPanel代码</span></span><br><span class="line"><span class="comment">//防止坦克重叠</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">missTank</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; enemies.size(); i++) &#123;</span><br><span class="line">        <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> enemies.get(i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i+<span class="number">1</span>; j &lt; enemies.size(); j++) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy1</span> <span class="operator">=</span> enemies.get(j);</span><br><span class="line">            enemy1.missMove(enemy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="五、源代码"><a href="#五、源代码" class="headerlink" title="五、源代码"></a>五、源代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//APP</span></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">APP</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">GameJFrame</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GameJFrame</span></span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GameJFrame</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">MyPanel</span> <span class="variable">myPanel</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GameJFrame</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        myPanel = <span class="keyword">new</span> <span class="title class_">MyPanel</span>();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(myPanel).start();</span><br><span class="line">        <span class="built_in">this</span>.add(myPanel);</span><br><span class="line">        <span class="built_in">this</span>.addKeyListener(myPanel);<span class="comment">//窗口监听面板发生的键盘事件</span></span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">1000</span>,<span class="number">750</span>);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyPanel</span></span><br><span class="line"><span class="keyword">import</span> javax.imageio.ImageIO;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.KeyListener;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> <span class="keyword">implements</span> <span class="title class_">KeyListener</span>, Runnable &#123;</span><br><span class="line">    <span class="keyword">private</span> Hero hero;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Enemy&gt; enemies = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Bomb&gt; bombs = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">enemyAmount</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Image</span> <span class="variable">image1</span> <span class="operator">=</span> ImageIO.read(getClass().getResourceAsStream(<span class="string">&quot;image/爆炸一.png&quot;</span>));</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Image</span> <span class="variable">image2</span> <span class="operator">=</span> ImageIO.read(getClass().getResourceAsStream(<span class="string">&quot;image/爆炸二.png&quot;</span>));</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Image</span> <span class="variable">image3</span> <span class="operator">=</span> ImageIO.read(getClass().getResourceAsStream(<span class="string">&quot;image/爆炸三.png&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyPanel</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//初始化我方坦克</span></span><br><span class="line">        hero = <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="number">500</span>, <span class="number">200</span>);</span><br><span class="line">        hero.setSpeed(<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//初始化敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; enemyAmount; i++) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Enemy</span>(<span class="number">100</span> * (i + <span class="number">1</span>), <span class="number">100</span> * (i + <span class="number">1</span>));</span><br><span class="line">            enemy.setDirect(<span class="number">1</span>);</span><br><span class="line">            enemy.setSpeed(<span class="number">1</span>);</span><br><span class="line">            enemies.add(enemy);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//敌方开启自由射击</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(enemy).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.paint(g);</span><br><span class="line">        <span class="comment">//填充背景</span></span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">750</span>);</span><br><span class="line">        <span class="comment">//画出我方坦克</span></span><br><span class="line">        <span class="keyword">if</span> (hero.isLive())</span><br><span class="line">            drawTank(hero.getX(), hero.getY(), g, hero.getDirect(), <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方坦克</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (enemy != <span class="literal">null</span> &amp;&amp; enemy.isLive())</span><br><span class="line">                drawTank(enemy.getX(), enemy.getY(), g, enemy.getDirect(), <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//画出我方发射子弹</span></span><br><span class="line">        drawShots(hero, g, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">//画出敌方发射子弹</span></span><br><span class="line">        <span class="keyword">for</span> (Enemy enemy : enemies) &#123;</span><br><span class="line">            drawShots(enemy, g, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断子弹是否击中坦克</span></span><br><span class="line">        hitTank();</span><br><span class="line">        <span class="comment">//画出爆炸效果</span></span><br><span class="line">        drawBombs(g);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//初始化炸弹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createBombs</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            bombs.add(<span class="keyword">new</span> <span class="title class_">Bomb</span>(x, y));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//子弹击中坦克</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hitTank</span><span class="params">()</span>&#123;</span><br><span class="line">        Iterator&lt;Enemy&gt; iterator = enemies.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Enemy</span> <span class="variable">enemy</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (enemy.isHit(hero)) &#123;</span><br><span class="line">                hero.setLive(<span class="literal">false</span>);</span><br><span class="line">                createBombs(hero.getX(), hero.getY());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (hero.isHit(enemy)) &#123;</span><br><span class="line">                enemy.setLive(<span class="literal">false</span>);</span><br><span class="line">                createBombs(enemy.getX(), enemy.getY());</span><br><span class="line">                iterator.remove();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//画出爆炸效果</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawBombs</span><span class="params">(Graphics g)</span> &#123;</span><br><span class="line">        Iterator&lt;Bomb&gt; iterator2 = bombs.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator2.hasNext()) &#123;</span><br><span class="line">            <span class="type">Bomb</span> <span class="variable">bomb</span> <span class="operator">=</span> iterator2.next();</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(bomb);</span><br><span class="line">            <span class="keyword">if</span> (bomb.getLife() &gt; <span class="number">6</span>)</span><br><span class="line">                g.drawImage(image1, bomb.getX(), bomb.getY(), <span class="number">60</span>, <span class="number">60</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (bomb.getLife() &gt; <span class="number">3</span>)</span><br><span class="line">                g.drawImage(image2, bomb.getX(), bomb.getY(), <span class="number">60</span>, <span class="number">60</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                g.drawImage(image3, bomb.getX(), bomb.getY(), <span class="number">60</span>, <span class="number">60</span>, <span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (!bomb.isLive())</span><br><span class="line">                iterator2.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShots</span><span class="params">(Tank tank, Graphics g, <span class="type">int</span> type)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Shot shot : tank.getShots()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (type == <span class="number">0</span>)</span><br><span class="line">                g.setColor(Color.yellow);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                g.setColor(Color.cyan);</span><br><span class="line">            g.fill3DRect(shot.getX(), shot.getY(), <span class="number">3</span>, <span class="number">3</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawTank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, Graphics g, <span class="type">int</span> direct, <span class="type">int</span> type)</span> &#123;</span><br><span class="line">        <span class="comment">//根据不同类型设置不同颜色</span></span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:<span class="comment">//Hero坦克</span></span><br><span class="line">                g.setColor(Color.yellow);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//Enemy坦克</span></span><br><span class="line">                g.setColor(Color.cyan);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//根据不同方向绘制坦克</span></span><br><span class="line">        <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:<span class="comment">//上</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y, x + <span class="number">20</span>, y + <span class="number">30</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//下</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">30</span>, y, <span class="number">10</span>, <span class="number">60</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">10</span>, y + <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x + <span class="number">20</span>, y + <span class="number">30</span>, x + <span class="number">20</span>, y + <span class="number">60</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:<span class="comment">//左</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x, y + <span class="number">30</span>, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">20</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x, y + <span class="number">20</span>, x + <span class="number">30</span>, y + <span class="number">20</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">//右</span></span><br><span class="line">                g.fill3DRect(x, y, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x, y + <span class="number">30</span>, <span class="number">60</span>, <span class="number">10</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fill3DRect(x + <span class="number">10</span>, y + <span class="number">10</span>, <span class="number">40</span>, <span class="number">20</span>, <span class="literal">false</span>);</span><br><span class="line">                g.fillOval(x + <span class="number">20</span>, y + <span class="number">10</span>, <span class="number">20</span>, <span class="number">20</span>);</span><br><span class="line">                g.drawLine(x + <span class="number">30</span>, y + <span class="number">20</span>, x + <span class="number">60</span>, y + <span class="number">20</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyTyped</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> e.getKeyCode();</span><br><span class="line">        <span class="keyword">switch</span> (d) &#123;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_W:</span><br><span class="line">                hero.setDirect(<span class="number">0</span>);</span><br><span class="line">                hero.moveUp();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_S:</span><br><span class="line">                hero.setDirect(<span class="number">1</span>);</span><br><span class="line">                hero.moveDown();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_A:</span><br><span class="line">                hero.setDirect(<span class="number">2</span>);</span><br><span class="line">                hero.moveLeft();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_D:</span><br><span class="line">                hero.setDirect(<span class="number">3</span>);</span><br><span class="line">                hero.moveRight();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.VK_J:</span><br><span class="line">                hero.shoot();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.repaint();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyReleased</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.repaint();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tank</span></span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0上1下2左3右</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">speed</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isLive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">private</span> Vector&lt;Shot&gt; shots = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//射击</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shoot</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否达到容量上限</span></span><br><span class="line">        <span class="keyword">if</span> (isFull())</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">switch</span> (getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x + <span class="number">20</span>, y, <span class="number">0</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x + <span class="number">20</span>, y + <span class="number">60</span>, <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x, y + <span class="number">20</span>, <span class="number">2</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                shots.add(<span class="keyword">new</span> <span class="title class_">Shot</span>(x + <span class="number">60</span>, y + <span class="number">20</span>, <span class="number">3</span>));</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//启动shot线程</span></span><br><span class="line">        <span class="keyword">for</span> (Shot shot : shots) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(shot).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除死亡子弹并判断容量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFull</span><span class="params">()</span> &#123;</span><br><span class="line">        Iterator&lt;Shot&gt; iterator = shots.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Shot</span> <span class="variable">shot</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (!shot.isLive()) &#123;</span><br><span class="line">                iterator.remove(); <span class="comment">//使用迭代器的remove方法删除元素</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> shots.size() == <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断子弹是否击中对方</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isHit</span><span class="params">(Tank tank)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> tank.getX();</span><br><span class="line">        <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> tank.getY();</span><br><span class="line">        Iterator&lt;Shot&gt; iterator = shots.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Shot</span> <span class="variable">shot</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="keyword">switch</span> (tank.getDirect()) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">if</span> (shot.getX() &gt;= x &amp;&amp; shot.getX() &lt;= x + <span class="number">40</span> &amp;&amp; shot.getY() &gt;= y &amp;&amp; shot.getY() &lt;= y + <span class="number">60</span>) &#123;</span><br><span class="line">                        shot.setLive(<span class="literal">false</span>);</span><br><span class="line">                        iterator.remove();</span><br><span class="line">                        tank.setLive(<span class="literal">false</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    <span class="keyword">if</span> (shot.getX() &gt;= x &amp;&amp; shot.getX() &lt;= x + <span class="number">60</span> &amp;&amp; shot.getY() &gt;= y &amp;&amp; shot.getY() &lt;= y + <span class="number">40</span>) &#123;</span><br><span class="line">                        shot.setLive(<span class="literal">false</span>);</span><br><span class="line">                        iterator.remove();</span><br><span class="line">                        tank.setLive(<span class="literal">false</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveUp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        y -= speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &gt;= <span class="number">690</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        y += speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveLeft</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt;= <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        x -= speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveRight</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &gt;= <span class="number">940</span>)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        x += speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Tank</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Tank</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(<span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDirect</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> direct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDirect</span><span class="params">(<span class="type">int</span> direct)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.direct = direct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSpeed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSpeed</span><span class="params">(<span class="type">int</span> speed)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.speed = speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Vector&lt;Shot&gt; <span class="title function_">getShots</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> shots;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setShots</span><span class="params">(Vector&lt;Shot&gt; shots)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shots = shots;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isLive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isLive;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLive</span><span class="params">(<span class="type">boolean</span> live)</span> &#123;</span><br><span class="line">        isLive = live;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Hero</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hero</span> <span class="keyword">extends</span> <span class="title class_">Tank</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Hero</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Enemy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Enemy</span> <span class="keyword">extends</span> <span class="title class_">Tank</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Thread moveThread;</span><br><span class="line">    <span class="keyword">private</span> Thread shootThread;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Enemy</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//随机移动</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//随机改变坦克方向</span></span><br><span class="line">        setDirect((<span class="type">int</span>) (Math.random() * <span class="number">4</span>));</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * <span class="number">100</span> + <span class="number">50</span>);<span class="comment">//最小值时的最低步数</span></span><br><span class="line">        <span class="keyword">switch</span> (getDirect()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveUp();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveDown();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveLeft();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">                    moveRight();</span><br><span class="line">                    extracted();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//控制时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">extracted</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">20</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自由随机移动线程</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">moving</span><span class="params">()</span> &#123;</span><br><span class="line">        moveThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">                move();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        moveThread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//射击线程</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">shooting</span><span class="params">()</span> &#123;</span><br><span class="line">        shootThread = <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">while</span> (isLive()) &#123;</span><br><span class="line">                shoot();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep((<span class="type">int</span>) (Math.random() * <span class="number">5000</span>));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        shootThread.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        shooting();</span><br><span class="line">        moving();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Thread <span class="title function_">getMoveThread</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> moveThread;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMoveThread</span><span class="params">(Thread moveThread)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.moveThread = moveThread;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Thread <span class="title function_">getShootThread</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> shootThread;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setShootThread</span><span class="params">(Thread shootThread)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shootThread = shootThread;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Shot</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Shot</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">direct</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">speed</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">isLive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Shot</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Shot</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> direct)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">        <span class="built_in">this</span>.direct = direct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(<span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSpeed</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSpeed</span><span class="params">(<span class="type">int</span> speed)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.speed = speed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (isLive) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (direct) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                    y -= speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    y += speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    x -= speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    x += speed;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!(x &gt;= <span class="number">0</span> &amp;&amp; x &lt;= <span class="number">1000</span> &amp;&amp; y &gt;= <span class="number">0</span> &amp;&amp; y &lt;= <span class="number">750</span>)) &#123;</span><br><span class="line">                isLive = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDirect</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> direct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDirect</span><span class="params">(<span class="type">int</span> direct)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.direct = direct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isLive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isLive;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLive</span><span class="params">(<span class="type">boolean</span> live)</span> &#123;</span><br><span class="line">        isLive = live;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Bomb</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bomb</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">life</span> <span class="operator">=</span> <span class="number">9</span>;<span class="comment">//生命值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> isLive;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//减少生命值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">LifeDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (life &gt; <span class="number">0</span>)</span><br><span class="line">            life--;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            isLive = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bomb</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bomb</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bomb</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> life, <span class="type">boolean</span> isLive)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(x, y);</span><br><span class="line">        <span class="built_in">this</span>.life = life;</span><br><span class="line">        <span class="built_in">this</span>.isLive = isLive;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getX</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setX</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getY</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setY</span><span class="params">(<span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLife</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> life;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLife</span><span class="params">(<span class="type">int</span> life)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.life = life;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isLive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isLive;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLive</span><span class="params">(<span class="type">boolean</span> live)</span> &#123;</span><br><span class="line">        isLive = live;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            LifeDown();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">500</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!isLive)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%8A%80%E6%9C%AF/" rel="tag"># 技术</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/03/20/%E6%88%BF%E5%B1%8B%E5%87%BA%E7%A7%9F%E7%B3%BB%E7%BB%9F/" rel="prev" title="房屋出租系统">
                  <i class="fa fa-angle-left"></i> 房屋出租系统
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="lv-container" data-id="city" data-uid="MTAyMC81OTU0My8zNjAwNQ=="></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Antarctica</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="/js/third-party/comments/livere.js"></script>

</body>
</html>
